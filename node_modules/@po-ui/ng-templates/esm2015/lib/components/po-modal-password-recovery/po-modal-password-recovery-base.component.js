import { EventEmitter, Input, Output, Directive } from '@angular/core';
import { browserLanguage, poLocaleDefault } from '../../utils/util';
import { poModalPasswordRecoveryLiterals } from './literals/i18n/po-modal-password-recovery-literals';
import { PoModalPasswordRecoveryType } from './enums/po-modal-password-recovery-type.enum';
const PoModalPasswordRecoveryDefaultMaxLength = 15;
const PoModalPasswordRecoveryDefaultMinLength = 15;
const PoModalPasswordRecoveryDefaultPhone = '(99) 99999-9999';
const PoModalPasswordRecoveryTypeDefault = PoModalPasswordRecoveryType.Email;
/**
 * @description
 *
 * O componente `po-modal-password-recovery` é utilizado como template para solicitação de troca de senha.
 *
 * É composto por uma modal que possui três telas, cada uma com as seguintes características:
 *
 * - A primeira possui campos para preenchimento de email ou número de telefone;
 * - Tela com campo para preenchimento de código SMS enviado para o número de telefone enviado;
 * - A terceira se trata de uma confirmação de envio de link para a caixa de email do usuário.
 *
 *
 * A propriedade `p-url-recovery` automatiza a rotina do componente e simplifica o processo
 * para recuperação de senha, bastando definir uma url para requisição dos recursos.
 * Seu detalhamento para uso pode ser visto logo abaixo em *propriedades*.
 * Caso julgue necessário, pode-se também definir manualmente a rotina do componente.
 *
 *
 * Para a modal de digitação de código SMS, é possível definir uma mensagem de erro
 * customizada com a propriedade `p-code-error` e há um link para
 * reenvio de código por SMS. Ao reenviar, o evento `p-code-submit` envia um objeto com o telefone do usuário e a quantidade
 * de vezes em que o usuário fez a solicitação de reenvio.
 *
 * > É indicada a utilização da tela de digitação para envio de código SMS apenas
 * se a opção por envio SMS for disponibilizada para o usuário.
 *
 *
 * A modal de confirmação contém uma ação de reenvio e o evento `p-submit`
 * é quem passa o objeto contendo o email em conjunto com a quantidade de tentativas de reenvio.
 *
 * > A tela de confirmação é indicada para quando o usuário solicitar a troca através do email.
 *
 * > Os textos das modals são pré-definidos, imutáveis e são traduzidos de acordo com o idioma do *browser* (pt, en e es)
 *
 * Para que as imagens sejam exibidas corretamente, é necessário incluir o caminho delas ao projeto. Para isso, edite
 * o *assets* no arquivo **angular.json** da aplicação na seguinte ordem:
 * ```
 *   "assets": [
 *     "src/assets",
 *     "src/favicon.ico",
 *     {
 *       "glob": "**\/*",
 *       "input": "node_modules/@po-ui/style/images",
 *       "output": "assets/images"
 *     }
 *   ]
 * ```
 */
export class PoModalPasswordRecoveryBaseComponent {
    constructor() {
        this._phoneMask = PoModalPasswordRecoveryDefaultPhone;
        this._type = PoModalPasswordRecoveryTypeDefault;
        this.maxLength = PoModalPasswordRecoveryDefaultMaxLength;
        this.minLength = PoModalPasswordRecoveryDefaultMinLength;
        this.literals = Object.assign(Object.assign({}, poModalPasswordRecoveryLiterals[poLocaleDefault]), poModalPasswordRecoveryLiterals[browserLanguage()]);
        /**
         * @optional
         *
         * @description
         *
         * Ação contendo como parâmetro o código enviado por SMS e digitado pelo usuário.
         *
         * > Esta propriedade será ignorada se for definido valor para a propriedade `p-url-recovery`.
         */
        this.codeSubmit = new EventEmitter();
        /**
         * @optional
         *
         * @description
         *
         * Ação contendo o email como parâmetro e que é executada quando o usuário clica sobres os botões de 'enviar' e 'reenviar' e-mail.
         *
         * > Esta propriedade será ignorada se for definido valor para a propriedade `p-url-recovery`.
         */
        this.submit = new EventEmitter();
    }
    /**
     * @optional
     *
     * @description
     *
     * Definição do e-mail que é exibido na mensagem para contato de suporte.
     */
    set contactEmail(value) {
        this._contactEmail = value;
        this.smsCodeErrorMessage = this.concatenateSMSErrorMessage(value);
    }
    get contactEmail() {
        return this._contactEmail;
    }
    /**
     * @optional
     *
     * @description
     *
     * Definição da mascara do campo de telefone.
     *
     * @default `(99) 99999-9999`
     */
    set phoneMask(value) {
        this._phoneMask = value || PoModalPasswordRecoveryDefaultPhone;
        this.minLength = this.maxLength = this._phoneMask.length;
    }
    get phoneMask() {
        return this._phoneMask;
    }
    /**
     * @optional
     *
     * @description
     *
     * Define o tipo de recuperação de senha que será exibido.
     *
     * @default `PoModalPasswordRecoveryType.Email`
     *
     */
    set type(value) {
        this._type = Object.values(PoModalPasswordRecoveryType).includes(value)
            ? value
            : PoModalPasswordRecoveryTypeDefault;
    }
    get type() {
        return this._type;
    }
    concatenateSMSErrorMessage(value) {
        const literalCodeErrorMessage = this.literals.smsCodeErrorMessagePhrase;
        return value && value !== ''
            ? `${literalCodeErrorMessage} ${this.literals.prepositionIn} ${value}.`
            : literalCodeErrorMessage;
    }
}
PoModalPasswordRecoveryBaseComponent.decorators = [
    { type: Directive }
];
PoModalPasswordRecoveryBaseComponent.propDecorators = {
    contactEmail: [{ type: Input, args: ['p-contact-email',] }],
    codeError: [{ type: Input, args: ['p-code-error',] }],
    phoneMask: [{ type: Input, args: ['p-phone-mask',] }],
    type: [{ type: Input, args: ['p-type',] }],
    urlRecovery: [{ type: Input, args: ['p-url-recovery',] }],
    codeSubmit: [{ type: Output, args: ['p-code-submit',] }],
    submit: [{ type: Output, args: ['p-submit',] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnktYmFzZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy90ZW1wbGF0ZXMvc3JjL2xpYi9jb21wb25lbnRzL3BvLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5L3BvLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LWJhc2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxZQUFZLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFdkUsT0FBTyxFQUFFLGVBQWUsRUFBRSxlQUFlLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUVwRSxPQUFPLEVBQUUsK0JBQStCLEVBQUUsTUFBTSxxREFBcUQsQ0FBQztBQUN0RyxPQUFPLEVBQUUsMkJBQTJCLEVBQUUsTUFBTSw4Q0FBOEMsQ0FBQztBQUUzRixNQUFNLHVDQUF1QyxHQUFHLEVBQUUsQ0FBQztBQUNuRCxNQUFNLHVDQUF1QyxHQUFHLEVBQUUsQ0FBQztBQUNuRCxNQUFNLG1DQUFtQyxHQUFHLGlCQUFpQixDQUFDO0FBQzlELE1BQU0sa0NBQWtDLEdBQWdDLDJCQUEyQixDQUFDLEtBQUssQ0FBQztBQUUxRzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0ErQ0c7QUFFSCxNQUFNLE9BQWdCLG9DQUFvQztJQUQxRDtRQUdVLGVBQVUsR0FBRyxtQ0FBbUMsQ0FBQztRQUNqRCxVQUFLLEdBQWdDLGtDQUFrQyxDQUFDO1FBR2hGLGNBQVMsR0FBRyx1Q0FBdUMsQ0FBQztRQUNwRCxjQUFTLEdBQUcsdUNBQXVDLENBQUM7UUFNcEQsYUFBUSxtQ0E2QkgsK0JBQStCLENBQUMsZUFBZSxDQUFDLEdBQ2hELCtCQUErQixDQUFDLGVBQWUsRUFBRSxDQUFDLEVBQ3JEO1FBOEtGOzs7Ozs7OztXQVFHO1FBQ3NCLGVBQVUsR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBRTlEOzs7Ozs7OztXQVFHO1FBQ2lCLFdBQU0sR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO0lBZ0N2RCxDQUFDO0lBaE9DOzs7Ozs7T0FNRztJQUNILElBQThCLFlBQVksQ0FBQyxLQUFhO1FBQ3RELElBQUksQ0FBQyxhQUFhLEdBQUcsS0FBSyxDQUFDO1FBRTNCLElBQUksQ0FBQyxtQkFBbUIsR0FBRyxJQUFJLENBQUMsMEJBQTBCLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDcEUsQ0FBQztJQUVELElBQUksWUFBWTtRQUNkLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQztJQUM1QixDQUFDO0lBV0Q7Ozs7Ozs7O09BUUc7SUFDSCxJQUEyQixTQUFTLENBQUMsS0FBYTtRQUNoRCxJQUFJLENBQUMsVUFBVSxHQUFHLEtBQUssSUFBSSxtQ0FBbUMsQ0FBQztRQUMvRCxJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUM7SUFDM0QsQ0FBQztJQUVELElBQUksU0FBUztRQUNYLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUN6QixDQUFDO0lBRUQ7Ozs7Ozs7OztPQVNHO0lBQ0gsSUFBcUIsSUFBSSxDQUFDLEtBQWtDO1FBQzFELElBQUksQ0FBQyxLQUFLLEdBQVMsTUFBTyxDQUFDLE1BQU0sQ0FBQywyQkFBMkIsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7WUFDNUUsQ0FBQyxDQUFDLEtBQUs7WUFDUCxDQUFDLENBQUMsa0NBQWtDLENBQUM7SUFDekMsQ0FBQztJQUVELElBQUksSUFBSTtRQUNOLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztJQUNwQixDQUFDO0lBMkpPLDBCQUEwQixDQUFDLEtBQWE7UUFDOUMsTUFBTSx1QkFBdUIsR0FBRyxJQUFJLENBQUMsUUFBUSxDQUFDLHlCQUF5QixDQUFDO1FBRXhFLE9BQU8sS0FBSyxJQUFJLEtBQUssS0FBSyxFQUFFO1lBQzFCLENBQUMsQ0FBQyxHQUFHLHVCQUF1QixJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxJQUFJLEtBQUssR0FBRztZQUN2RSxDQUFDLENBQUMsdUJBQXVCLENBQUM7SUFDOUIsQ0FBQzs7O1lBOVFGLFNBQVM7OzsyQkFzRFAsS0FBSyxTQUFDLGlCQUFpQjt3QkFpQnZCLEtBQUssU0FBQyxjQUFjO3dCQVdwQixLQUFLLFNBQUMsY0FBYzttQkFtQnBCLEtBQUssU0FBQyxRQUFROzBCQW9IZCxLQUFLLFNBQUMsZ0JBQWdCO3lCQVd0QixNQUFNLFNBQUMsZUFBZTtxQkFXdEIsTUFBTSxTQUFDLFVBQVUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElucHV0LCBPdXRwdXQsIERpcmVjdGl2ZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBicm93c2VyTGFuZ3VhZ2UsIHBvTG9jYWxlRGVmYXVsdCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWwnO1xuXG5pbXBvcnQgeyBwb01vZGFsUGFzc3dvcmRSZWNvdmVyeUxpdGVyYWxzIH0gZnJvbSAnLi9saXRlcmFscy9pMThuL3BvLW1vZGFsLXBhc3N3b3JkLXJlY292ZXJ5LWxpdGVyYWxzJztcbmltcG9ydCB7IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZSB9IGZyb20gJy4vZW51bXMvcG8tbW9kYWwtcGFzc3dvcmQtcmVjb3ZlcnktdHlwZS5lbnVtJztcblxuY29uc3QgUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlEZWZhdWx0TWF4TGVuZ3RoID0gMTU7XG5jb25zdCBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeURlZmF1bHRNaW5MZW5ndGggPSAxNTtcbmNvbnN0IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5RGVmYXVsdFBob25lID0gJyg5OSkgOTk5OTktOTk5OSc7XG5jb25zdCBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGVEZWZhdWx0OiBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUgPSBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGUuRW1haWw7XG5cbi8qKlxuICogQGRlc2NyaXB0aW9uXG4gKlxuICogTyBjb21wb25lbnRlIGBwby1tb2RhbC1wYXNzd29yZC1yZWNvdmVyeWAgw6kgdXRpbGl6YWRvIGNvbW8gdGVtcGxhdGUgcGFyYSBzb2xpY2l0YcOnw6NvIGRlIHRyb2NhIGRlIHNlbmhhLlxuICpcbiAqIMOJIGNvbXBvc3RvIHBvciB1bWEgbW9kYWwgcXVlIHBvc3N1aSB0csOqcyB0ZWxhcywgY2FkYSB1bWEgY29tIGFzIHNlZ3VpbnRlcyBjYXJhY3RlcsOtc3RpY2FzOlxuICpcbiAqIC0gQSBwcmltZWlyYSBwb3NzdWkgY2FtcG9zIHBhcmEgcHJlZW5jaGltZW50byBkZSBlbWFpbCBvdSBuw7ptZXJvIGRlIHRlbGVmb25lO1xuICogLSBUZWxhIGNvbSBjYW1wbyBwYXJhIHByZWVuY2hpbWVudG8gZGUgY8OzZGlnbyBTTVMgZW52aWFkbyBwYXJhIG8gbsO6bWVybyBkZSB0ZWxlZm9uZSBlbnZpYWRvO1xuICogLSBBIHRlcmNlaXJhIHNlIHRyYXRhIGRlIHVtYSBjb25maXJtYcOnw6NvIGRlIGVudmlvIGRlIGxpbmsgcGFyYSBhIGNhaXhhIGRlIGVtYWlsIGRvIHVzdcOhcmlvLlxuICpcbiAqXG4gKiBBIHByb3ByaWVkYWRlIGBwLXVybC1yZWNvdmVyeWAgYXV0b21hdGl6YSBhIHJvdGluYSBkbyBjb21wb25lbnRlIGUgc2ltcGxpZmljYSBvIHByb2Nlc3NvXG4gKiBwYXJhIHJlY3VwZXJhw6fDo28gZGUgc2VuaGEsIGJhc3RhbmRvIGRlZmluaXIgdW1hIHVybCBwYXJhIHJlcXVpc2nDp8OjbyBkb3MgcmVjdXJzb3MuXG4gKiBTZXUgZGV0YWxoYW1lbnRvIHBhcmEgdXNvIHBvZGUgc2VyIHZpc3RvIGxvZ28gYWJhaXhvIGVtICpwcm9wcmllZGFkZXMqLlxuICogQ2FzbyBqdWxndWUgbmVjZXNzw6FyaW8sIHBvZGUtc2UgdGFtYsOpbSBkZWZpbmlyIG1hbnVhbG1lbnRlIGEgcm90aW5hIGRvIGNvbXBvbmVudGUuXG4gKlxuICpcbiAqIFBhcmEgYSBtb2RhbCBkZSBkaWdpdGHDp8OjbyBkZSBjw7NkaWdvIFNNUywgw6kgcG9zc8OtdmVsIGRlZmluaXIgdW1hIG1lbnNhZ2VtIGRlIGVycm9cbiAqIGN1c3RvbWl6YWRhIGNvbSBhIHByb3ByaWVkYWRlIGBwLWNvZGUtZXJyb3JgIGUgaMOhIHVtIGxpbmsgcGFyYVxuICogcmVlbnZpbyBkZSBjw7NkaWdvIHBvciBTTVMuIEFvIHJlZW52aWFyLCBvIGV2ZW50byBgcC1jb2RlLXN1Ym1pdGAgZW52aWEgdW0gb2JqZXRvIGNvbSBvIHRlbGVmb25lIGRvIHVzdcOhcmlvIGUgYSBxdWFudGlkYWRlXG4gKiBkZSB2ZXplcyBlbSBxdWUgbyB1c3XDoXJpbyBmZXogYSBzb2xpY2l0YcOnw6NvIGRlIHJlZW52aW8uXG4gKlxuICogPiDDiSBpbmRpY2FkYSBhIHV0aWxpemHDp8OjbyBkYSB0ZWxhIGRlIGRpZ2l0YcOnw6NvIHBhcmEgZW52aW8gZGUgY8OzZGlnbyBTTVMgYXBlbmFzXG4gKiBzZSBhIG9ww6fDo28gcG9yIGVudmlvIFNNUyBmb3IgZGlzcG9uaWJpbGl6YWRhIHBhcmEgbyB1c3XDoXJpby5cbiAqXG4gKlxuICogQSBtb2RhbCBkZSBjb25maXJtYcOnw6NvIGNvbnTDqW0gdW1hIGHDp8OjbyBkZSByZWVudmlvIGUgbyBldmVudG8gYHAtc3VibWl0YFxuICogw6kgcXVlbSBwYXNzYSBvIG9iamV0byBjb250ZW5kbyBvIGVtYWlsIGVtIGNvbmp1bnRvIGNvbSBhIHF1YW50aWRhZGUgZGUgdGVudGF0aXZhcyBkZSByZWVudmlvLlxuICpcbiAqID4gQSB0ZWxhIGRlIGNvbmZpcm1hw6fDo28gw6kgaW5kaWNhZGEgcGFyYSBxdWFuZG8gbyB1c3XDoXJpbyBzb2xpY2l0YXIgYSB0cm9jYSBhdHJhdsOpcyBkbyBlbWFpbC5cbiAqXG4gKiA+IE9zIHRleHRvcyBkYXMgbW9kYWxzIHPDo28gcHLDqS1kZWZpbmlkb3MsIGltdXTDoXZlaXMgZSBzw6NvIHRyYWR1emlkb3MgZGUgYWNvcmRvIGNvbSBvIGlkaW9tYSBkbyAqYnJvd3NlciogKHB0LCBlbiBlIGVzKVxuICpcbiAqIFBhcmEgcXVlIGFzIGltYWdlbnMgc2VqYW0gZXhpYmlkYXMgY29ycmV0YW1lbnRlLCDDqSBuZWNlc3PDoXJpbyBpbmNsdWlyIG8gY2FtaW5obyBkZWxhcyBhbyBwcm9qZXRvLiBQYXJhIGlzc28sIGVkaXRlXG4gKiBvICphc3NldHMqIG5vIGFycXVpdm8gKiphbmd1bGFyLmpzb24qKiBkYSBhcGxpY2HDp8OjbyBuYSBzZWd1aW50ZSBvcmRlbTpcbiAqIGBgYFxuICogICBcImFzc2V0c1wiOiBbXG4gKiAgICAgXCJzcmMvYXNzZXRzXCIsXG4gKiAgICAgXCJzcmMvZmF2aWNvbi5pY29cIixcbiAqICAgICB7XG4gKiAgICAgICBcImdsb2JcIjogXCIqKlxcLypcIixcbiAqICAgICAgIFwiaW5wdXRcIjogXCJub2RlX21vZHVsZXMvQHBvLXVpL3N0eWxlL2ltYWdlc1wiLFxuICogICAgICAgXCJvdXRwdXRcIjogXCJhc3NldHMvaW1hZ2VzXCJcbiAqICAgICB9XG4gKiAgIF1cbiAqIGBgYFxuICovXG5ARGlyZWN0aXZlKClcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeUJhc2VDb21wb25lbnQge1xuICBwcml2YXRlIF9jb250YWN0RW1haWw6IHN0cmluZztcbiAgcHJpdmF0ZSBfcGhvbmVNYXNrID0gUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlEZWZhdWx0UGhvbmU7XG4gIHByaXZhdGUgX3R5cGU6IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZSA9IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZURlZmF1bHQ7XG5cbiAgZW1haWw6IHN0cmluZztcbiAgbWF4TGVuZ3RoID0gUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlEZWZhdWx0TWF4TGVuZ3RoO1xuICBtaW5MZW5ndGggPSBQb01vZGFsUGFzc3dvcmRSZWNvdmVyeURlZmF1bHRNaW5MZW5ndGg7XG4gIG1vZGFsUGFzc3dvcmRSZWNvdmVyeVR5cGVBbGw6IGJvb2xlYW47XG4gIHBob25lOiBzdHJpbmc7XG4gIHNtc0NvZGU6IHN0cmluZztcbiAgc21zQ29kZUVycm9yTWVzc2FnZTogc3RyaW5nO1xuXG4gIGxpdGVyYWxzOiB7XG4gICAgY2FuY2VsQnV0dG9uOiBzdHJpbmc7XG4gICAgY2xvc2VCdXR0b246IHN0cmluZztcbiAgICBjb250aW51ZUJ1dHRvbjogc3RyaW5nO1xuICAgIGVtYWlsOiBzdHJpbmc7XG4gICAgZW1haWxFcnJvck1lc3NhZ2VQaHJhc2U6IHN0cmluZztcbiAgICBlbWFpbFNlbnRDb25maXJtYXRpb25QaHJhc2U6IHN0cmluZztcbiAgICBlbWFpbFNlbnRUaXRsZTogc3RyaW5nO1xuICAgIGZvcmdvdFBhc3N3b3JkVGl0bGU6IHN0cmluZztcbiAgICBpbnNlcnRDb2RlOiBzdHJpbmc7XG4gICAgaW5zZXJ0RW1haWw6IHN0cmluZztcbiAgICBpbnNlcnRQaG9uZTogc3RyaW5nO1xuICAgIHBob25lRXJyb3JNZXNzYWdlUGhyYXNlOiBzdHJpbmc7XG4gICAgcHJlcG9zaXRpb25Jbjogc3RyaW5nO1xuICAgIHByZXBvc2l0aW9uT3I6IHN0cmluZztcbiAgICByZWNvdmVyeVBhc3N3b3JkUGhyYXNlOiBzdHJpbmc7XG4gICAgcmVzZW5kRW1haWxCdXR0b246IHN0cmluZztcbiAgICByZXNlbmRTbXNDb2RlUGhyYXNlOiBzdHJpbmc7XG4gICAgc2VuZEFnYWluOiBzdHJpbmc7XG4gICAgc2VuZEFnYWluUGhyYXNlOiBzdHJpbmc7XG4gICAgc2VuZEJ1dHRvbjogc3RyaW5nO1xuICAgIHNtczogc3RyaW5nO1xuICAgIHNtc0NvZGU6IHN0cmluZztcbiAgICBzbXNDb2RlRXJyb3JNZXNzYWdlUGhyYXNlOiBzdHJpbmc7XG4gICAgc2VudFNtc0NvZGVQaHJhc2U6IHN0cmluZztcbiAgICBzdXBwb3J0Q29udGFjdDogc3RyaW5nO1xuICAgIHRlbGVwaG9uZTogc3RyaW5nO1xuICAgIHR5cGVDb2RlVGl0bGU6IHN0cmluZztcbiAgfSA9IHtcbiAgICAuLi5wb01vZGFsUGFzc3dvcmRSZWNvdmVyeUxpdGVyYWxzW3BvTG9jYWxlRGVmYXVsdF0sXG4gICAgLi4ucG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlMaXRlcmFsc1ticm93c2VyTGFuZ3VhZ2UoKV1cbiAgfTtcblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBEZWZpbmnDp8OjbyBkbyBlLW1haWwgcXVlIMOpIGV4aWJpZG8gbmEgbWVuc2FnZW0gcGFyYSBjb250YXRvIGRlIHN1cG9ydGUuXG4gICAqL1xuICBASW5wdXQoJ3AtY29udGFjdC1lbWFpbCcpIHNldCBjb250YWN0RW1haWwodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMuX2NvbnRhY3RFbWFpbCA9IHZhbHVlO1xuXG4gICAgdGhpcy5zbXNDb2RlRXJyb3JNZXNzYWdlID0gdGhpcy5jb25jYXRlbmF0ZVNNU0Vycm9yTWVzc2FnZSh2YWx1ZSk7XG4gIH1cblxuICBnZXQgY29udGFjdEVtYWlsKCkge1xuICAgIHJldHVybiB0aGlzLl9jb250YWN0RW1haWw7XG4gIH1cblxuICAvKipcbiAgICogQG9wdGlvbmFsXG4gICAqXG4gICAqIEBkZXNjcmlwdGlvblxuICAgKlxuICAgKiBEZWZpbmnDp8OjbyBkZSBtZW5zYWdlbSBkZSBlcnJvIGN1c3RvbWl6YWRhIHBhcmEgcXVhbmRvIG8gdXN1w6FyaW8gcGFzc2FyIHVtIGPDs2RpZ28gU01TIGludsOhbGlkbyBvdSBlcnJhZG8uXG4gICAqL1xuICBASW5wdXQoJ3AtY29kZS1lcnJvcicpIGNvZGVFcnJvcjogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIERlZmluacOnw6NvIGRhIG1hc2NhcmEgZG8gY2FtcG8gZGUgdGVsZWZvbmUuXG4gICAqXG4gICAqIEBkZWZhdWx0IGAoOTkpIDk5OTk5LTk5OTlgXG4gICAqL1xuICBASW5wdXQoJ3AtcGhvbmUtbWFzaycpIHNldCBwaG9uZU1hc2sodmFsdWU6IHN0cmluZykge1xuICAgIHRoaXMuX3Bob25lTWFzayA9IHZhbHVlIHx8IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5RGVmYXVsdFBob25lO1xuICAgIHRoaXMubWluTGVuZ3RoID0gdGhpcy5tYXhMZW5ndGggPSB0aGlzLl9waG9uZU1hc2subGVuZ3RoO1xuICB9XG5cbiAgZ2V0IHBob25lTWFzaygpIHtcbiAgICByZXR1cm4gdGhpcy5fcGhvbmVNYXNrO1xuICB9XG5cbiAgLyoqXG4gICAqIEBvcHRpb25hbFxuICAgKlxuICAgKiBAZGVzY3JpcHRpb25cbiAgICpcbiAgICogRGVmaW5lIG8gdGlwbyBkZSByZWN1cGVyYcOnw6NvIGRlIHNlbmhhIHF1ZSBzZXLDoSBleGliaWRvLlxuICAgKlxuICAgKiBAZGVmYXVsdCBgUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlLkVtYWlsYFxuICAgKlxuICAgKi9cbiAgQElucHV0KCdwLXR5cGUnKSBzZXQgdHlwZSh2YWx1ZTogUG9Nb2RhbFBhc3N3b3JkUmVjb3ZlcnlUeXBlKSB7XG4gICAgdGhpcy5fdHlwZSA9ICg8YW55Pk9iamVjdCkudmFsdWVzKFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZSkuaW5jbHVkZXModmFsdWUpXG4gICAgICA/IHZhbHVlXG4gICAgICA6IFBvTW9kYWxQYXNzd29yZFJlY292ZXJ5VHlwZURlZmF1bHQ7XG4gIH1cblxuICBnZXQgdHlwZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fdHlwZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEVuZHBvaW50IHVzYWRvIHBlbG8gdGVtcGxhdGUgcGFyYSByZXF1aXNpw6fDo28gZG8gcmVjdXJzby4gUXVhbmRvIHByZWVuY2hpZG8sXG4gICAqIG8gbcOpdG9kb3MgYHAtc3VibWl0YCBlIGBwLXN1Ym1pdC1jb2RlYCBzZXLDo28gaWdub3JhZG9zIGUgbyBjb21wb25lbnRlIGFkcXVpcmlyw6EgYXV0b21hdGl6YcOnw6NvXG4gICAqIHBhcmEgbyBwcm9jZXNzbyBkZSBzb2xpY2l0YcOnw6NvIGRlIHRyb2NhIGRlIHNlbmhhLlxuICAgKlxuICAgKiAjIyMgUHJvY2Vzc29zXG4gICAqIEFvIGRpZ2l0YXIgdW0gdmFsb3IgdsOhbGlkbyBubyBjYW1wbyBkZSBlbWFpbC90ZWxlZm9uZSBlIHByZXNzaW9uYXIgKiplbnZpYXIqKixcbiAgICogbyBjb21wb25lbnRlIGZhcsOhIHVtYSByZXF1aXNpw6fDo28gYFBPU1RgIG5hIHVybCBlc3BlY2lmaWNhZGEgbmVzdGEgcHJvcHJpZWRhZGUgcGFzc2FuZG8gbyBvYmpldG8gY29udGVuZG8gbyB2YWxvciBkZWZpbmlkbyBwZWxvIHVzdcOhcmlvLlxuICAgKlxuICAgKiBgYGBcbiAgICogYm9keSB7XG4gICAqICBlbWFpbDogZW1haWwsXG4gICAqICByZXRyeT86IHJldHJ5XG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqXG4gICAqICMjIyMgUmVjdXBlcmHDp8OjbyBwb3IgZW1haWxcbiAgICogUGFyYSBhIHJlY3VwZXJhw6fDo28gZGUgc2VuaGEgcG9yICoqZW1haWwqKiwgbyBjw7NkaWdvIGRlIHJlc3Bvc3RhIEhUVFAgZGUgc3RhdHVzIGVzcGVyYWRvIMOpIGAyMDRgLlxuICAgKlxuICAgKiBFbSBjYXNvIGRlICoqc3VjZXNzbyoqLCBzZXLDoSBleGliaWRhIGEgbW9kYWwgZGUgY29uZmlybWHDp8OjbyBkZSBlLW1haWwgcGFyYSBvIHVzdcOhcmlvLlxuICAgKlxuICAgKlxuICAgKiA+IEEgYcOnw6NvICoqUmVlbnZpYXIqKiBuYSB0ZWxhIGRlIGNvbmZpcm1hw6fDo28gZWZldHVhIHVtYSBub3ZhIHJlcXVpc2nDp8Ojb1xuICAgKiBwYXNzYW5kby1zZSBvIG9iamV0byBjb20gaW5jcmVtZW50byBwYXJhIG8gdmFsb3IgZGEgcHJvcHJpZWRhZGUgKipyZXRyeSoqLlxuICAgKlxuICAgKiAqUHJvY2Vzc28gZmluYWxpemFkby4qXG4gICAqXG4gICAqXG4gICAqICMjIyMgUmVjdXBlcmHDp8OjbyBwb3IgU01TXG4gICAqIFNlIGEgb3DDp8OjbyBkZSByZWN1cGVyYcOnw6NvIGZvciBwb3IgKipTTVMqKiwgbyBjw7NkaWdvIGRlIHN0YXR1cyBkZSBzdWNlc3NvIGRldmUgc2VyIGAyMDBgLlxuICAgKiBFbSBjYXNvIGRlICoqc3VjZXNzbyoqLCBhYnJlLXNlIGEgbW9kYWwgZGUgZGlnaXRhw6fDo28gZGUgY8OzZGlnbyBTTVMgZSBhIHJlc3Bvc3RhXG4gICAqIGRlc3RhIHJlcXVpc2nDp8OjbyBkZXZlIHJldG9ybmFyIHVtYSBkZWZpbmnDp8OjbyBkZSBkYWRvcyBhYmFpeG86XG4gICAqXG4gICAqIGBgYFxuICAgKiAyMDA6XG4gICAqICB7XG4gICAqICAgIGhhc2g6IGhhc2gsXG4gICAqICAgIHVybFZhbGlkYXRpb25Db2RlPzogdXJsXG4gICAqICB9XG4gICAqIGBgYFxuICAgKlxuICAgKlxuICAgKiAtIE8gKipoYXNoKiogc2Vyw6EgbyBjw7NkaWdvIGRlIHZhbGlkYcOnw6NvIGRhIHNvbGljaXRhw6fDo28gZG8gU01TIHBhcmEgc2VyIGVudmlhZG8ganVudGFtZW50ZSBjb20gbyBjw7NkaWdvIGRlIHZlcmlmaWNhw6fDo28gZG8gU01TO1xuICAgKiAtICoqdXJsVmFsaWRhdGlvbkNvZGUqKiDDqSBhIHVybCB1c2FkYSBwYXJhIHZhbGlkYcOnw6NvIGRvIGPDs2RpZ28gZW52aWFkbyBwb3IgU01TLlxuICAgKlxuICAgKlxuICAgKiA+IENhc28gbsOjbyBzZWphIHBhc3NhZG8gdXJsVmFsaWRhdGlvbkNvZGUsIG8gZW5kcG9pbnQgdXNhZG8gcGFyYSB2YWxpZGHDp8OjbyBkbyBjw7NkaWdvIHNlcsOhIGA8cC11cmwtcmVjb3Zlcnk+L3ZhbGlkYXRpb25gLlxuICAgKlxuICAgKlxuICAgKiAjIyMjIFZhbGlkYcOnw6NvIGRvIGPDs2RpZ28gU01TXG4gICAqIEFvIGRpZ2l0YXIgdW0gdmFsb3IgdsOhbGlkbyBubyBjYW1wbyBkZSBjw7NkaWdvIFNNUyBlIHByZXNzaW9uYXIgKipjb250aW51YXIqKiwgbyBjb21wb25lbnRlIGZhcsOhIHVtYSByZXF1aXNpw6fDo28gYFBPU1RgIGNvbnRlbmRvOlxuICAgKlxuICAgKiBgYGBcbiAgICogUE9TVCAvPHAtdXJsLXJlY292ZXJ5Pi92YWxpZGF0aW9uIE9VIC88dXJsVmFsaWRhdGlvbkNvZGU+XG4gICAqIEJvZHkge1xuICAgKiAgaGFzaDogaGFzaCxcbiAgICogIGNvZGU6IGNvZGVcbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICpcbiAgICogTyBjw7NkaWdvIGRlIHJlc3Bvc3RhIEhUVFAgZGUgc3RhdHVzIGVzcGVyYWRvIMOpIGAyMDBgLlxuICAgKlxuICAgKiBFbSBjYXNvIGRlICoqZXJybyoqIG5hIHZhbGlkYcOnw6NvIGRvIGPDs2RpZ28gU01TLCBhIG1vZGFsIHNlIG1hbnTDqW0gY29tIG8gY2FtcG8gcGFyYSBkaWdpdGHDp8Ojb1xuICAgKiBkZSBjw7NkaWdvIFNNU1xuICAgKlxuICAgKlxuICAgKiA+IFBvZGUtc2UgYXRyaWJ1aXIgYSBtZW5zYWdlbSBkZSBlcnJvIChtZXNzYWdlKSBwYXJhIG8gYXRyaWJ1dG8gYHAtY29kZS1lcnJvcmAgY29uZm9ybWUgcmV0b3JubyBhYmFpeG86XG4gICAqXG4gICAqIGBgYFxuICAgKiA0MDBcbiAgICogIHtcbiAgICogICAgZXJyb3Ige1xuICAgKiAgICAgIG1lc3NhZ2U6ICdFcnJvciBNZXNzYWdlJ1xuICAgKiAgICB9XG4gICAqICB9XG4gICAqIGBgYFxuICAgKlxuICAgKlxuICAgKiBFbSBjYXNvIGRlICoqc3VjZXNzbyoqLCBlc3BlcmEtc2UgYSByZXNwb3N0YSBkZXN0YSByZXF1aXNpw6fDo28gcmV0b3JuYW5kbyBhIHNlZ3VpbnRlIGRlZmluacOnw6NvOlxuICAgKlxuICAgKiBgYGBcbiAgICogMjAwOlxuICAgKiAge1xuICAgKiAgICB0b2tlbjogdG9rZW4sXG4gICAqICAgIHVybENoYW5nZVBhc3N3b3JkPzogdXJsXG4gICAqICB9XG4gICAqIGBgYFxuICAgKlxuICAgKlxuICAgKiAtICoqdG9rZW4qKjogVG9rZW4gZGUgYWx0ZXJhw6fDo28gZGUgc2VuaGE7XG4gICAqIC0gKip1cmxDaGFuZ2VQYXNzd29yZCoqOiB1cmwgcGFyYSBvIGZvcm11bMOhcmlvIGRlIGFsdGVyYcOnw6NvIGRlIHNlbmhhLlxuICAgKlxuICAgKlxuICAgKiBPIGNvbXBvbmVudGUgZXN0w6EgY29uZmlndXJhZG8gcGFyYSByZWRpcmVjaW9uYXIgcGFyYSBhIHVybCBlc3RhYmVsZWNpZGEgZW0gYHVybENoYW5nZVBhc3N3b3JkYC5cbiAgICpcbiAgICogPiBDYXNvIG7Do28gc2VqYSBwYXNzYWRvIHZhbG9yIHBhcmEgdXJsQ2hhbmdlUGFzc3dvcmQsXG4gICAqIGEgdXJsIHVzYWRhIHBhcmEgdmFsaWRhw6fDo28gc2Vyw6EgYSBgPHAtdXJsLXJlY292ZXJ5Pi9jaGFuZ2VQYXNzd29yZD90b2tlbj08dG9rZW4+YC5cbiAgICpcbiAgICogKlByb2Nlc3NvIGZpbmFsaXphZG8uKlxuICAgKi9cbiAgQElucHV0KCdwLXVybC1yZWNvdmVyeScpIHVybFJlY292ZXJ5Pzogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEHDp8OjbyBjb250ZW5kbyBjb21vIHBhcsOibWV0cm8gbyBjw7NkaWdvIGVudmlhZG8gcG9yIFNNUyBlIGRpZ2l0YWRvIHBlbG8gdXN1w6FyaW8uXG4gICAqXG4gICAqID4gRXN0YSBwcm9wcmllZGFkZSBzZXLDoSBpZ25vcmFkYSBzZSBmb3IgZGVmaW5pZG8gdmFsb3IgcGFyYSBhIHByb3ByaWVkYWRlIGBwLXVybC1yZWNvdmVyeWAuXG4gICAqL1xuICBAT3V0cHV0KCdwLWNvZGUtc3VibWl0JykgY29kZVN1Ym1pdCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xuXG4gIC8qKlxuICAgKiBAb3B0aW9uYWxcbiAgICpcbiAgICogQGRlc2NyaXB0aW9uXG4gICAqXG4gICAqIEHDp8OjbyBjb250ZW5kbyBvIGVtYWlsIGNvbW8gcGFyw6JtZXRybyBlIHF1ZSDDqSBleGVjdXRhZGEgcXVhbmRvIG8gdXN1w6FyaW8gY2xpY2Egc29icmVzIG9zIGJvdMO1ZXMgZGUgJ2VudmlhcicgZSAncmVlbnZpYXInIGUtbWFpbC5cbiAgICpcbiAgICogPiBFc3RhIHByb3ByaWVkYWRlIHNlcsOhIGlnbm9yYWRhIHNlIGZvciBkZWZpbmlkbyB2YWxvciBwYXJhIGEgcHJvcHJpZWRhZGUgYHAtdXJsLXJlY292ZXJ5YC5cbiAgICovXG4gIEBPdXRwdXQoJ3Atc3VibWl0Jykgc3VibWl0ID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XG5cbiAgLyoqXG4gICAqIEFjw6NvIHBhcmEgY29uY2x1c8OjbyBkZSBwcm9jZXNzbyBlIGZlY2hhbWVudG8gZGEgbW9kYWwuIEluZGljYS1zZSBzdWEgdXRpbGl6YcOnw6NvXG4gICAqIHBhcmEgYXDDs3MgbyBlbnZpbyBlIHZhbGlkYcOnw6NvIGRvIGPDs2RpZ28gU01TIGVudmlhZG8gcGVsbyB1c3XDoXJpby5cbiAgICpcbiAgICogPiBOYXMgbW9kYWxzIGVtIHF1ZSBow6EgYSBhw6fDo28gZGUgJ2NhbmNlbGFyJyBkaXNwZW5zYS1zZSBvIHVzbyBkZXN0YSBhw6fDo28gcG9pcyBvIGNvbXBvbmVudGUgasOhIHRyYXRhIG8gZmVjaGFtZW50byBkYSBtb2RhbC5cbiAgICovXG4gIGFic3RyYWN0IGNvbXBsZXRlZCgpOiB2b2lkO1xuXG4gIC8qKlxuICAgKiBBYnJlIGEgbW9kYWwgZGUgcHJlZW5jaGltZW50byBkZSBlbWFpbCBvdSBuw7ptZXJvIGRlIHRlbGVmb25lIHBhcmEgc29saWNpdGHDp8OjbyBkZSB0cm9jYSBkZSBzZW5oYS5cbiAgICovXG4gIGFic3RyYWN0IG9wZW4oKTogdm9pZDtcblxuICAvKipcbiAgICogQWJyZSBhIG1vZGFsIGRlIGNvbmZpcm1hw6fDo28gZGUgZW52aW8gZGUgZW1haWwuXG4gICAqL1xuICBhYnN0cmFjdCBvcGVuQ29uZmlybWF0aW9uKCk6IHZvaWQ7XG5cbiAgLyoqXG4gICAqIEFicmUgYSBtb2RhbCBkZSBwcmVlbmNoaW1lbnRvIGRvIGPDs2RpZ28gU01TIGVudmlhZG8gYW8gdXN1w6FyaW8uXG4gICAqL1xuICBhYnN0cmFjdCBvcGVuU21zQ29kZSgpOiB2b2lkO1xuXG4gIHByaXZhdGUgY29uY2F0ZW5hdGVTTVNFcnJvck1lc3NhZ2UodmFsdWU6IHN0cmluZykge1xuICAgIGNvbnN0IGxpdGVyYWxDb2RlRXJyb3JNZXNzYWdlID0gdGhpcy5saXRlcmFscy5zbXNDb2RlRXJyb3JNZXNzYWdlUGhyYXNlO1xuXG4gICAgcmV0dXJuIHZhbHVlICYmIHZhbHVlICE9PSAnJ1xuICAgICAgPyBgJHtsaXRlcmFsQ29kZUVycm9yTWVzc2FnZX0gJHt0aGlzLmxpdGVyYWxzLnByZXBvc2l0aW9uSW59ICR7dmFsdWV9LmBcbiAgICAgIDogbGl0ZXJhbENvZGVFcnJvck1lc3NhZ2U7XG4gIH1cbn1cbiJdfQ==