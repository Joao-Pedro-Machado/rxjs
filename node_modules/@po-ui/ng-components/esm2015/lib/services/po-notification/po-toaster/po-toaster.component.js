import { ChangeDetectorRef, Component, ElementRef, ViewChild } from '@angular/core';
import { Subject } from 'rxjs';
import { PoToasterBaseComponent } from './po-toaster-base.component';
import { PoToasterType } from './po-toaster-type.enum';
import { PoToasterOrientation } from './po-toaster-orientation.enum';
/**
 * @docsPrivate
 *
 * @docsExtends PoToasterBaseComponent
 */
export class PoToasterComponent extends PoToasterBaseComponent {
    constructor(changeDetector, elementeRef) {
        super();
        this.changeDetector = changeDetector;
        this.elementeRef = elementeRef;
        /* Margem do Toaster referênte à sua orientação e posição*/
        this.margin = 20;
        /* Observable para monitorar o Close to Toaster */
        this.observableOnClose = new Subject();
        /* Mostra ou oculta o Toaster */
        this.showToaster = true;
        /* Posição do Toaster*/
        this.toasterPosition = 'po-toaster-bottom';
    }
    /* Muda a posição do Toaster na tela*/
    changePosition(position) {
        this.elementeRef.nativeElement.style.display = 'table';
        this.margin = 6 + 44 * position + position * 6;
        if (this.orientation === PoToasterOrientation.Top) {
            this.toaster.nativeElement.style.top = this.margin + 'px';
        }
        else {
            this.toaster.nativeElement.style.bottom = this.margin + 'px';
        }
    }
    /* Fecha o componente Toaster */
    close() {
        this.showToaster = false;
        this.observableOnClose.next(true);
    }
    /* Configura o Toaster com os atributos passados para ele */
    configToaster(poToaster) {
        this.type = poToaster.type;
        this.message = poToaster.message;
        this.orientation = poToaster.orientation;
        this.position = poToaster.position;
        this.action = poToaster.action;
        this.actionLabel = poToaster.actionLabel ? poToaster.actionLabel : 'Fechar';
        this.componentRef = poToaster.componentRef;
        /* Muda a orientação do Toaster */
        if (this.orientation === PoToasterOrientation.Top) {
            this.toasterPosition = 'po-toaster-top';
        }
        /* Muda a posição do Toaster */
        this.changePosition(this.position);
        /* Switch para o tipo de Toaster */
        switch (this.type) {
            case PoToasterType.Error: {
                this.toasterType = 'po-toaster-error';
                this.icon = 'po-icon-close';
                break;
            }
            case PoToasterType.Information: {
                this.toasterType = 'po-toaster-info';
                this.icon = 'po-icon-info';
                break;
            }
            case PoToasterType.Success: {
                this.toasterType = 'po-toaster-success';
                this.icon = 'po-icon-ok';
                break;
            }
            case PoToasterType.Warning: {
                this.toasterType = 'po-toaster-warning';
                this.icon = 'po-icon-warning';
                break;
            }
        }
        this.changeDetector.detectChanges();
    }
    getShowToaster() {
        return this.showToaster;
    }
    getIcon() {
        return this.icon;
    }
    getToasterPosition() {
        return this.toasterPosition;
    }
    getToasterType() {
        return this.toasterType;
    }
    /* Chama a função passada pelo atributo `action` */
    poToasterAction() {
        this.action(this);
    }
}
PoToasterComponent.decorators = [
    { type: Component, args: [{
                selector: 'po-toaster',
                template: "<div\n  #toaster\n  *ngIf=\"getShowToaster()\"\n  class=\"po-toaster {{ getToasterType() }} {{ getToasterPosition() }} po-clickable\"\n  (click)=\"close()\"\n>\n  <div class=\"po-toaster-message\"><span class=\"po-icon {{ getIcon() }}\"></span> {{ message }}</div>\n\n  <div *ngIf=\"action !== undefined\" (click)=\"poToasterAction()\" class=\"po-toaster-action\">\n    {{ actionLabel }}\n  </div>\n</div>\n"
            },] }
];
PoToasterComponent.ctorParameters = () => [
    { type: ChangeDetectorRef },
    { type: ElementRef }
];
PoToasterComponent.propDecorators = {
    toaster: [{ type: ViewChild, args: ['toaster',] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tdG9hc3Rlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL3NlcnZpY2VzL3BvLW5vdGlmaWNhdGlvbi9wby10b2FzdGVyL3BvLXRvYXN0ZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUVwRixPQUFPLEVBQUUsT0FBTyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBRS9CLE9BQU8sRUFBRSxzQkFBc0IsRUFBRSxNQUFNLDZCQUE2QixDQUFDO0FBRXJFLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSx3QkFBd0IsQ0FBQztBQUN2RCxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSwrQkFBK0IsQ0FBQztBQUVyRTs7OztHQUlHO0FBS0gsTUFBTSxPQUFPLGtCQUFtQixTQUFRLHNCQUFzQjtJQWlCNUQsWUFBbUIsY0FBaUMsRUFBVSxXQUF3QjtRQUNwRixLQUFLLEVBQUUsQ0FBQztRQURTLG1CQUFjLEdBQWQsY0FBYyxDQUFtQjtRQUFVLGdCQUFXLEdBQVgsV0FBVyxDQUFhO1FBZHRGLDJEQUEyRDtRQUNuRCxXQUFNLEdBQVcsRUFBRSxDQUFDO1FBQzVCLGtEQUFrRDtRQUMxQyxzQkFBaUIsR0FBRyxJQUFJLE9BQU8sRUFBTyxDQUFDO1FBQy9DLGdDQUFnQztRQUN4QixnQkFBVyxHQUFZLElBQUksQ0FBQztRQUNwQyx1QkFBdUI7UUFDZixvQkFBZSxHQUFXLG1CQUFtQixDQUFDO0lBU3RELENBQUM7SUFFRCxzQ0FBc0M7SUFDdEMsY0FBYyxDQUFDLFFBQWdCO1FBQzdCLElBQUksQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxPQUFPLEdBQUcsT0FBTyxDQUFDO1FBRXZELElBQUksQ0FBQyxNQUFN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QUFJLENBQUMsV0FBVyxDQUFDO0lBQzFCLENBQUM7SUFFRCxtREFBbUQ7SUFDbkQsZUFBZTtRQUNiLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDcEIsQ0FBQzs7O1lBNUdGLFNBQVMsU0FBQztnQkFDVCxRQUFRLEVBQUUsWUFBWTtnQkFDdEIsbWFBQTBDO2FBQzNDOzs7WUFqQlEsaUJBQWlCO1lBQWEsVUFBVTs7O3NCQWlDOUMsU0FBUyxTQUFDLFNBQVMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBDaGFuZ2VEZXRlY3RvclJlZiwgQ29tcG9uZW50LCBFbGVtZW50UmVmLCBWaWV3Q2hpbGQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcblxuaW1wb3J0IHsgU3ViamVjdCB9IGZyb20gJ3J4anMnO1xuXG5pbXBvcnQgeyBQb1RvYXN0ZXJCYXNlQ29tcG9uZW50IH0gZnJvbSAnLi9wby10b2FzdGVyLWJhc2UuY29tcG9uZW50JztcbmltcG9ydCB7IFBvVG9hc3RlciB9IGZyb20gJy4vcG8tdG9hc3Rlci5pbnRlcmZhY2UnO1xuaW1wb3J0IHsgUG9Ub2FzdGVyVHlwZSB9IGZyb20gJy4vcG8tdG9hc3Rlci10eXBlLmVudW0nO1xuaW1wb3J0IHsgUG9Ub2FzdGVyT3JpZW50YXRpb24gfSBmcm9tICcuL3BvLXRvYXN0ZXItb3JpZW50YXRpb24uZW51bSc7XG5cbi8qKlxuICogQGRvY3NQcml2YXRlXG4gKlxuICogQGRvY3NFeHRlbmRzIFBvVG9hc3RlckJhc2VDb21wb25lbnRcbiAqL1xuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAncG8tdG9hc3RlcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9wby10b2FzdGVyLmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBQb1RvYXN0ZXJDb21wb25lbnQgZXh0ZW5kcyBQb1RvYXN0ZXJCYXNlQ29tcG9uZW50IHtcbiAgLyogw41jb25lIGRvIFRvYXN0ZXIgKi9cbiAgcHJpdmF0ZSBpY29uOiBzdHJpbmc7XG4gIC8qIE1hcmdlbSBkbyBUb2FzdGVyIHJlZmVyw6pudGUgw6Agc3VhIG9yaWVudGHDp8OjbyBlIHBvc2nDp8OjbyovXG4gIHByaXZhdGUgbWFyZ2luOiBudW1iZXIgPSAyMDtcbiAgLyogT2JzZXJ2YWJsZSBwYXJhIG1vbml0b3JhciBvIENsb3NlIHRvIFRvYXN0ZXIgKi9cbiAgcHJpdmF0ZSBvYnNlcnZhYmxlT25DbG9zZSA9IG5ldyBTdWJqZWN0PGFueT4oKTtcbiAgLyogTW9zdHJhIG91IG9jdWx0YSBvIFRvYXN0ZXIgKi9cbiAgcHJpdmF0ZSBzaG93VG9hc3RlcjogYm9vbGVhbiA9IHRydWU7XG4gIC8qIFBvc2nDp8OjbyBkbyBUb2FzdGVyKi9cbiAgcHJpdmF0ZSB0b2FzdGVyUG9zaXRpb246IHN0cmluZyA9ICdwby10b2FzdGVyLWJvdHRvbSc7XG4gIC8qIFRpcG8gZG8gVG9hc3RlciAqL1xuICBwcml2YXRlIHRvYXN0ZXJUeXBlOiBzdHJpbmc7XG5cbiAgLyogQ29tcG9uZW50ZSB0b2FzdGVyICovXG4gIEBWaWV3Q2hpbGQoJ3RvYXN0ZXInKSB0b2FzdGVyOiBFbGVtZW50UmVmO1xuXG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBjaGFuZ2VEZXRlY3RvcjogQ2hhbmdlRGV0ZWN0b3JSZWYsIHByaXZhdGUgZWxlbWVudGVSZWY/OiBFbGVtZW50UmVmKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIC8qIE11ZGEgYSBwb3Npw6fDo28gZG8gVG9hc3RlciBuYSB0ZWxhKi9cbiAgY2hhbmdlUG9zaXRpb24ocG9zaXRpb246IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuZWxlbWVudGVSZWYubmF0aXZlRWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gJ3RhYmxlJztcblxuICAgIHRoaXMubWFyZ2luID0gNiArIDQ0ICogcG9zaXRpb24gKyBwb3NpdGlvbiAqIDY7XG5cbiAgICBpZiAodGhpcy5vcmllbnRhdGlvbiA9PT0gUG9Ub2FzdGVyT3JpZW50YXRpb24uVG9wKSB7XG4gICAgICB0aGlzLnRvYXN0ZXIubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSB0aGlzLm1hcmdpbiArICdweCc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudG9hc3Rlci5uYXRpdmVFbGVtZW50LnN0eWxlLmJvdHRvbSA9IHRoaXMubWFyZ2luICsgJ3B4JztcbiAgICB9XG4gIH1cblxuICAvKiBGZWNoYSBvIGNvbXBvbmVudGUgVG9hc3RlciAqL1xuICBjbG9zZSgpOiB2b2lkIHtcbiAgICB0aGlzLnNob3dUb2FzdGVyID0gZmFsc2U7XG4gICAgdGhpcy5vYnNlcnZhYmxlT25DbG9zZS5uZXh0KHRydWUpO1xuICB9XG5cbiAgLyogQ29uZmlndXJhIG8gVG9hc3RlciBjb20gb3MgYXRyaWJ1dG9zIHBhc3NhZG9zIHBhcmEgZWxlICovXG4gIGNvbmZpZ1RvYXN0ZXIocG9Ub2FzdGVyOiBQb1RvYXN0ZXIpIHtcbiAgICB0aGlzLnR5cGUgPSBwb1RvYXN0ZXIudHlwZTtcbiAgICB0aGlzLm1lc3NhZ2UgPSBwb1RvYXN0ZXIubWVzc2FnZTtcbiAgICB0aGlzLm9yaWVudGF0aW9uID0gcG9Ub2FzdGVyLm9yaWVudGF0aW9uO1xuICAgIHRoaXMucG9zaXRpb24gPSBwb1RvYXN0ZXIucG9zaXRpb247XG4gICAgdGhpcy5hY3Rpb24gPSBwb1RvYXN0ZXIuYWN0aW9uO1xuICAgIHRoaXMuYWN0aW9uTGFiZWwgPSBwb1RvYXN0ZXIuYWN0aW9uTGFiZWwgPyBwb1RvYXN0ZXIuYWN0aW9uTGFiZWwgOiAnRmVjaGFyJztcbiAgICB0aGlzLmNvbXBvbmVudFJlZiA9IHBvVG9hc3Rlci5jb21wb25lbnRSZWY7XG5cbiAgICAvKiBNdWRhIGEgb3JpZW50YcOnw6NvIGRvIFRvYXN0ZXIgKi9cbiAgICBpZiAodGhpcy5vcmllbnRhdGlvbiA9PT0gUG9Ub2FzdGVyT3JpZW50YXRpb24uVG9wKSB7XG4gICAgICB0aGlzLnRvYXN0ZXJQb3NpdGlvbiA9ICdwby10b2FzdGVyLXRvcCc7XG4gICAgfVxuXG4gICAgLyogTXVkYSBhIHBvc2nDp8OjbyBkbyBUb2FzdGVyICovXG4gICAgdGhpcy5jaGFuZ2VQb3NpdGlvbih0aGlzLnBvc2l0aW9uKTtcblxuICAgIC8qIFN3aXRjaCBwYXJhIG8gdGlwbyBkZSBUb2FzdGVyICovXG4gICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcbiAgICAgIGNhc2UgUG9Ub2FzdGVyVHlwZS5FcnJvcjoge1xuICAgICAgICB0aGlzLnRvYXN0ZXJUeXBlID0gJ3BvLXRvYXN0ZXItZXJyb3InO1xuICAgICAgICB0aGlzLmljb24gPSAncG8taWNvbi1jbG9zZSc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBQb1RvYXN0ZXJUeXBlLkluZm9ybWF0aW9uOiB7XG4gICAgICAgIHRoaXMudG9hc3RlclR5cGUgPSAncG8tdG9hc3Rlci1pbmZvJztcbiAgICAgICAgdGhpcy5pY29uID0gJ3BvLWljb24taW5mbyc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBQb1RvYXN0ZXJUeXBlLlN1Y2Nlc3M6IHtcbiAgICAgICAgdGhpcy50b2FzdGVyVHlwZSA9ICdwby10b2FzdGVyLXN1Y2Nlc3MnO1xuICAgICAgICB0aGlzLmljb24gPSAncG8taWNvbi1vayc7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSBQb1RvYXN0ZXJUeXBlLldhcm5pbmc6IHtcbiAgICAgICAgdGhpcy50b2FzdGVyVHlwZSA9ICdwby10b2FzdGVyLXdhcm5pbmcnO1xuICAgICAgICB0aGlzLmljb24gPSAncG8taWNvbi13YXJuaW5nJztcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5kZXRlY3RDaGFuZ2VzKCk7XG4gIH1cblxuICBnZXRTaG93VG9hc3RlcigpIHtcbiAgICByZXR1cm4gdGhpcy5zaG93VG9hc3RlcjtcbiAgfVxuXG4gIGdldEljb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaWNvbjtcbiAgfVxuXG4gIGdldFRvYXN0ZXJQb3NpdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy50b2FzdGVyUG9zaXRpb247XG4gIH1cblxuICBnZXRUb2FzdGVyVHlwZSgpIHtcbiAgICByZXR1cm4gdGhpcy50b2FzdGVyVHlwZTtcbiAgfVxuXG4gIC8qIENoYW1hIGEgZnVuw6fDo28gcGFzc2FkYSBwZWxvIGF0cmlidXRvIGBhY3Rpb25gICovXG4gIHBvVG9hc3RlckFjdGlvbigpOiB2b2lkIHtcbiAgICB0aGlzLmFjdGlvbih0aGlzKTtcbiAgfVxufVxuIl19